<!DOCTYPE html>
<html data-require="math math-format graphie">
  <head>
    <title>Rectangle area</title>
    <script src="../khan-exercise.js"></script>
    <script>
    var cs = function( B,H ) {
	var graph = KhanUtil.currentGraph;
	var lines = [];
	var numbers = [];
        block = 0;
	for (i = 0;i < H; i++ ) {
	    for (j = 0;j < B;j++ ) {
	        block ++;
		line = graph.style({
		    stroke: "red",
		    strokeWidth: 2
		}, function() {
		    graph.path([ [ j, i ], [ j + 1, i ], [ j + 1, i + 1 ], [ j, i + 1 ], [ j, i ] ]);
		});
		lines.push(line);
		
		num = graph.label( [ j+.5, i+.5 ], block, "center", {
		    color: "orange" 
		});
		numbers.push(num);
	    }
	}
	return [lines, numbers];
    }

    function clear_cs( cs ) {
	for ( i in cs[0] ) {
	    i.remove();
	}
	for ( i in cs[1] ) {
	    i.remove();
	}
    }
  </script>
  </head>
  <body>

    <div class="exercise">
      <div class="vars">
	<var id="B">randRange(3,12)</var>
	<var id="H">randRange(3,12)</var>
      </div>
      
      <div class="problems">
        <div id="find-area">
          <p class="question">What is the area of the rectangle below?</p>

	  <div class="graphie" id="grid">
            graphInit({
		range: [ [ -1, B + 1 ] , [ -1 , H + 1 ] ],
	        scale: 35,
		axisOpacity: 0.01,
		tickLen: 0
	    });
            
            style({
		stroke: "black",
		strokeWidth: 3
	    }, function() {
		path([ [ 0, 0 ], [ B, 0 ], [ B, H ], [ 0, H ], [ 0, 0 ] ]);
	    });
	  </div>
          <p class="solution" data-type="rational"><var>B*H</var></p>
        </div>
      </div>
      
      <div class="hints">
	  <p>To find the area of a rectangle simply count the number of <span class="hint_orange">square units</span> that fit inside it.</p>

	  <div class="graphie" data-update="grid">
	    path( [ [ 0, 0 ], [ 0, 1 ], [ 1, 1 ], 
	    [ 1, 0 ], [ 0, 0 ] ], { 
	      //fill:"red",
	      stroke: "orange",
	      strokeWidth: 2,
	    });
	  </div>

	  <div class="graphie" data-update="grid">
	    cs = cs(B,H);
	  </div>

	  <div class="graphie" data-update="grid">
	    path( [ [ B-1, H-1 ], [ B-1, H ], [ B, H ], 
	    [ B, H-1 ], [ B-1, H-1 ] ], { 
	      fill:"orange",
	      stroke: "orange",
	      strokeWidth: 3,
	    });

	    label( [ B-.5, H-.5 ], B*H, "center", {
	      color: "black"
	    });
	  </div>

	  <p>So, the area is <span class="hint_orange"><var>B*H</var></span>.</p>

	  <p>A better way to calculate the area would be to multiply the <span class="hint_red">base</span> by the <span class="hint_blue">height</span>.</p>
	  

	  <p>[TODO: (1) remove paths and numbers added in countSquares()...
	    (2) draw base / height
	    (3) finish hints for area
	  ]</p>

	  <div class="graphie" data-update="grid">
            clear_cs(cs);
	    path( [ [ 0, -1 ], [ B, -1 ] ], {
	      stroke: "red",
	      strokeWidth: 3,
	      arrows: "|-|"
	      });
	    label( [ B/2, 0 ], B, "top", {
	      color: "red"
	      });
	    
	  </div>

	  
	</div>
	
      </div>
    </div>
  </body>
</html>
